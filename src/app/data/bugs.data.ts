import { BugInfo } from '../models/bug-info.model';

/**
 * 10 new bugs for regression testing — fresh set, different from previous.
 */
export const KNOWN_BUGS: BugInfo[] = [
  {
    id: 'bug-1',
    title: 'Bug 1: services/ — email on undefined',
    description: 'UserProfileService.getEmail — user.email when id 999 not found.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'email')",
    file: 'src/app/services/user-profile.service.ts',
    line: 12,
    fixSuggestion: 'return user?.email ?? ""',
    triggerLabel: 'Bug 1',
  },
  {
    id: 'bug-2',
    title: 'Bug 2: services/ — JSON.parse no try/catch',
    description: 'ConfigService.parseIds — invalid JSON throws SyntaxError.',
    errorMessage: 'SyntaxError: Unexpected token',
    file: 'src/app/services/config.service.ts',
    line: 8,
    fixSuggestion: 'try { JSON.parse(...) } catch { return [] }',
    triggerLabel: 'Bug 2',
  },
  {
    id: 'bug-3',
    title: 'Bug 3: pipes/ — toUpperCase on null',
    description: 'UppercasePipe.transform — value.toUpperCase when value null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'toUpperCase')",
    file: 'src/app/pipes/uppercase.pipe.ts',
    line: 7,
    fixSuggestion: 'return value?.toUpperCase() ?? ""',
    triggerLabel: 'Bug 3',
  },
  {
    id: 'bug-4',
    title: 'Bug 4: utils/ — toISOString on undefined',
    description: 'formatDate in date-utils — d.toISOString when d undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'toISOString')",
    file: 'src/app/utils/date-utils.ts',
    line: 3,
    fixSuggestion: 'return d?.toISOString() ?? ""',
    triggerLabel: 'Bug 4',
  },
  {
    id: 'bug-5',
    title: 'Bug 5: lib/ — replace on null',
    description: 'sanitize in sanitize.ts — input.replace when input null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'replace')",
    file: 'src/app/lib/sanitize.ts',
    line: 3,
    fixSuggestion: 'return input?.replace(/[<>]/g, "") ?? ""',
    triggerLabel: 'Bug 5',
  },
  {
    id: 'bug-6',
    title: 'Bug 6: guards/ — role on undefined',
    description: 'AuthGuard.getRole — user.role when userId 999 not found.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'role')",
    file: 'src/app/guards/auth.guard.ts',
    line: 12,
    fixSuggestion: 'return user?.role ?? ""',
    triggerLabel: 'Bug 6',
  },
  {
    id: 'bug-7',
    title: 'Bug 7: directives/ — length on undefined',
    description: 'getTooltipLength — text.length when text undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'length')",
    file: 'src/app/directives/tooltip.helper.ts',
    line: 3,
    fixSuggestion: 'return text?.length ?? 0',
    triggerLabel: 'Bug 7',
  },
  {
    id: 'bug-8',
    title: 'Bug 8: components/ — reduce on undefined',
    description: 'getAverage in stats.helper — nums.reduce when nums undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'reduce')",
    file: 'src/app/components/stats/stats.helper.ts',
    line: 3,
    fixSuggestion: 'nums ?? []; guard nums.length',
    triggerLabel: 'Bug 8',
  },
  {
    id: 'bug-9',
    title: 'Bug 9: services/ — value on undefined (Map.get)',
    description: 'CacheService.get — entry.value when key not in cache.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'value')",
    file: 'src/app/services/cache.service.ts',
    line: 12,
    fixSuggestion: 'return entry?.value ?? ""',
    triggerLabel: 'Bug 9',
  },
  {
    id: 'bug-10',
    title: 'Bug 10: utils/ — split on null',
    description: 'splitBy in split-utils — str.split when str null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'split')",
    file: 'src/app/utils/split-utils.ts',
    line: 3,
    fixSuggestion: 'return str?.split(delim) ?? []',
    triggerLabel: 'Bug 10',
  },
];
