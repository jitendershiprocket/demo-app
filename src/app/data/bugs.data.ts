import { BugInfo } from '../models/bug-info.model';

/**
 * 10 bugs in DIFFERENT locations — tests agent file resolution maturity.
 * services/, pipes/, utils/, lib/, guards/, directives/, components/
 */
export const KNOWN_BUGS: BugInfo[] = [
  {
    id: 'bug-1',
    title: 'Bug 1: services/ — undefined.id',
    description: 'UserService.getUserId — user.id when user undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'id')",
    file: 'src/app/services/user.service.ts',
    line: 13,
    fixSuggestion: 'return user?.id ?? null',
    triggerLabel: 'Bug 1',
  },
  {
    id: 'bug-2',
    title: 'Bug 2: pipes/ — toFixed on null',
    description: 'CurrencyFormatPipe.transform — value.toFixed when value null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'toFixed')",
    file: 'src/app/pipes/currency-format.pipe.ts',
    line: 7,
    fixSuggestion: 'return value?.toFixed(2) ?? "0.00"',
    triggerLabel: 'Bug 2',
  },
  {
    id: 'bug-3',
    title: 'Bug 3: utils/ — toISOString on undefined',
    description: 'formatTimestamp in date.utils — d.toISOString when ts null.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'toISOString')",
    file: 'src/app/utils/date.utils.ts',
    line: 4,
    fixSuggestion: 'return d?.toISOString() ?? ""',
    triggerLabel: 'Bug 3',
  },
  {
    id: 'bug-4',
    title: 'Bug 4: utils/ — empty array first element',
    description: 'firstId in collection.utils — arr[0].id when arr empty.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'id')",
    file: 'src/app/utils/collection.utils.ts',
    line: 3,
    fixSuggestion: 'return arr[0]?.id ?? 0',
    triggerLabel: 'Bug 4',
  },
  {
    id: 'bug-5',
    title: 'Bug 5: services/ — JSON.parse',
    description: 'ConfigService.parseIds — invalid JSON throws SyntaxError.',
    errorMessage: 'SyntaxError: Unexpected token',
    file: 'src/app/services/config.service.ts',
    line: 10,
    fixSuggestion: 'try { JSON.parse(...) } catch { return [] }',
    triggerLabel: 'Bug 5',
  },
  {
    id: 'bug-6',
    title: 'Bug 6: components/ — reduce on undefined',
    description: 'calculateSubtotal in order-card.helper — items undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'reduce')",
    file: 'src/app/components/order-card/order-card.helper.ts',
    line: 2,
    fixSuggestion: 'items ?? []',
    triggerLabel: 'Bug 6',
  },
  {
    id: 'bug-7',
    title: 'Bug 7: directives/ — length on undefined',
    description: 'ClickTrackerDirective — this.label when @Input not set.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'length')",
    file: 'src/app/directives/click-tracker.directive.ts',
    line: 11,
    fixSuggestion: 'this.label?.length ?? 0',
    triggerLabel: 'Bug 7',
  },
  {
    id: 'bug-8',
    title: 'Bug 8: guards/ — level on undefined',
    description: 'AccessChecker.getAccessLevel — user undefined for userId 999.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'level')",
    file: 'src/app/guards/access-checker.ts',
    line: 12,
    fixSuggestion: 'return user?.level ?? 0',
    triggerLabel: 'Bug 8',
  },
  {
    id: 'bug-9',
    title: 'Bug 9: lib/ — trim on null',
    description: 'validateRequired in validators.ts — value.trim when null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'trim')",
    file: 'src/app/lib/validators.ts',
    line: 3,
    fixSuggestion: 'return value?.trim().length ? true : false',
    triggerLabel: 'Bug 9',
  },
  {
    id: 'bug-10',
    title: 'Bug 10: services/ — Division by zero',
    description: 'CalculatorService.divide — b=0 throws.',
    errorMessage: 'Error: Division by zero',
    file: 'src/app/services/calculator.service.ts',
    line: 8,
    fixSuggestion: 'if (b === 0) return 0',
    triggerLabel: 'Bug 10',
  },
];
