import { BugInfo } from '../models/bug-info.model';

/**
 * 10 diverse bugs — NOT just null/undefined.
 * RangeError, Error, SyntaxError, TypeError (not a function, reduce), etc.
 */
export const KNOWN_BUGS: BugInfo[] = [
  {
    id: 'bug-1',
    title: 'Bug 1: RangeError — repeat with negative',
    description: 'repeatStr in string-utils — str.repeat(-1) throws RangeError.',
    errorMessage: 'RangeError: Invalid count value',
    file: 'src/app/utils/string-utils.ts',
    line: 3,
    fixSuggestion: 'if (count < 0) return ""; return str.repeat(count)',
    triggerLabel: 'Bug 1',
  },
  {
    id: 'bug-2',
    title: 'Bug 2: RangeError — stack overflow (recursion)',
    description: 'MathService.factorial — negative n causes infinite recursion.',
    errorMessage: 'RangeError: Maximum call stack size exceeded',
    file: 'src/app/services/math.service.ts',
    line: 7,
    fixSuggestion: 'if (n < 0) return 0 or throw',
    triggerLabel: 'Bug 2',
  },
  {
    id: 'bug-3',
    title: 'Bug 3: Error — division by zero',
    description: 'CalculatorService.divide — throws when b=0.',
    errorMessage: 'Error: Division by zero',
    file: 'src/app/services/calculator.service.ts',
    line: 6,
    fixSuggestion: 'if (b === 0) return 0 or return Infinity',
    triggerLabel: 'Bug 3',
  },
  {
    id: 'bug-4',
    title: 'Bug 4: TypeError — not a function',
    description: 'safeInvoke in call-utils — fn() when fn is undefined.',
    errorMessage: "TypeError: fn is not a function",
    file: 'src/app/utils/call-utils.ts',
    line: 3,
    fixSuggestion: 'return fn?.() ?? undefined',
    triggerLabel: 'Bug 4',
  },
  {
    id: 'bug-5',
    title: 'Bug 5: TypeError — reduce of empty array',
    description: 'sum in array-utils — [].reduce() without initial value.',
    errorMessage: 'TypeError: Reduce of empty array with no initial value',
    file: 'src/app/utils/array-utils.ts',
    line: 3,
    fixSuggestion: 'return arr.reduce((a,b) => a+b, 0)',
    triggerLabel: 'Bug 5',
  },
  {
    id: 'bug-6',
    title: 'Bug 6: RangeError — toPrecision invalid',
    description: 'toPrecisionSafe — n.toPrecision(0) throws RangeError.',
    errorMessage: 'RangeError: toPrecision() argument must be between 1 and 100',
    file: 'src/app/lib/number-utils.ts',
    line: 3,
    fixSuggestion: 'if (precision < 1 || precision > 100) return String(n)',
    triggerLabel: 'Bug 6',
  },
  {
    id: 'bug-7',
    title: 'Bug 7: SyntaxError — JSON.parse invalid',
    description: 'StorageService.getParsed — JSON.parse(undefined) throws.',
    errorMessage: 'SyntaxError: Unexpected token u in JSON',
    file: 'src/app/services/storage.service.ts',
    line: 9,
    fixSuggestion: 'const raw = this.store[key]; return raw ? JSON.parse(raw) : null',
    triggerLabel: 'Bug 7',
  },
  {
    id: 'bug-8',
    title: 'Bug 8: SyntaxError — invalid RegExp',
    description: 'matchPattern in regex.utils — new RegExp("[") throws.',
    errorMessage: 'SyntaxError: Invalid regular expression',
    file: 'src/app/utils/regex.utils.ts',
    line: 3,
    fixSuggestion: 'try { new RegExp(pattern) } catch { return null }',
    triggerLabel: 'Bug 8',
  },
  {
    id: 'bug-9',
    title: 'Bug 9: TypeError — Object.entries on null',
    description: 'pickKeys in object-utils — Object.entries(null) throws.',
    errorMessage: 'TypeError: Cannot convert undefined or null to object',
    file: 'src/app/utils/object-utils.ts',
    line: 3,
    fixSuggestion: 'if (!obj) return []',
    triggerLabel: 'Bug 9',
  },
  {
    id: 'bug-10',
    title: 'Bug 10: TypeError — property on undefined (find)',
    description: 'findItemName — .name when find() returns undefined.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'name')",
    file: 'src/app/components/search/search.helper.ts',
    line: 4,
    fixSuggestion: 'return items?.find(...)?.name ?? ""',
    triggerLabel: 'Bug 10',
  },
];
