import { BugInfo } from '../models/bug-info.model';

/** 10 independent bugs — each in a different file, unique inputs. */
export const KNOWN_BUGS: BugInfo[] = [
  {
    id: 'bug-1',
    title: 'Bug 1: Undefined property access',
    description: 'UserService.getUserId — accesses user.id when user is undefined (ID 999).',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'id')",
    file: 'src/app/services/user.service.ts',
    line: 18,
    fixSuggestion: 'return user?.id ?? null',
    triggerLabel: 'Bug 1: getUserId',
  },
  {
    id: 'bug-2',
    title: 'Bug 2: Division by zero',
    description: 'CalculatorService.divide — throws when divisor is 0.',
    errorMessage: 'Error: Division by zero',
    file: 'src/app/services/calculator.service.ts',
    line: 9,
    fixSuggestion: 'if (b === 0) return 0;',
    triggerLabel: 'Bug 2: divide(10,0)',
  },
  {
    id: 'bug-3',
    title: 'Bug 3: toUpperCase on undefined',
    description: 'FormatService.getUppercaseEmail — .toUpperCase() when email is undefined (ID 999).',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'toUpperCase')",
    file: 'src/app/services/format.service.ts',
    line: 18,
    fixSuggestion: 'return email?.toUpperCase() ?? ""',
    triggerLabel: 'Bug 3: getUppercaseEmail',
  },
  {
    id: 'bug-4',
    title: 'Bug 4: Array index out of bounds',
    description: 'InventoryService.getItemNameAt — accesses items[5] when only 2 items exist.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'name')",
    file: 'src/app/services/inventory.service.ts',
    line: 17,
    fixSuggestion: 'return this.items[index]?.name ?? ""',
    triggerLabel: 'Bug 4: getItemNameAt(5)',
  },
  {
    id: 'bug-5',
    title: 'Bug 5: JSON.parse without try/catch',
    description: 'ConfigService.parseIds — invalid JSON throws SyntaxError.',
    errorMessage: 'SyntaxError: Unexpected token',
    file: 'src/app/services/config.service.ts',
    line: 12,
    fixSuggestion: 'try { JSON.parse(...) } catch { return [] }',
    triggerLabel: 'Bug 5: parseIds(invalid)',
  },
  {
    id: 'bug-6',
    title: 'Bug 6: toISOString on undefined',
    description: 'DateService.formatDateForKey — key 999 returns undefined, .toISOString() throws.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'toISOString')",
    file: 'src/app/services/date.service.ts',
    line: 14,
    fixSuggestion: 'return d?.toISOString() ?? ""',
    triggerLabel: 'Bug 6: formatDateForKey',
  },
  {
    id: 'bug-7',
    title: 'Bug 7: Factorial stack overflow',
    description: 'MathService.factorial — negative input causes infinite recursion.',
    errorMessage: 'RangeError: Maximum call stack size exceeded',
    file: 'src/app/services/math.service.ts',
    line: 11,
    fixSuggestion: 'if (n < 0) return 0; or throw',
    triggerLabel: 'Bug 7: factorial(-1)',
  },
  {
    id: 'bug-8',
    title: 'Bug 8: split on null',
    description: 'StringService.reverse — str.split when str is null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'split')",
    file: 'src/app/services/string.service.ts',
    line: 10,
    fixSuggestion: 'return str?.split("").reverse().join("") ?? ""',
    triggerLabel: 'Bug 8: reverse(null)',
  },
  {
    id: 'bug-9',
    title: 'Bug 9: Cache entry undefined',
    description: 'CacheService.get — .value on undefined when key not in cache.',
    errorMessage: "TypeError: Cannot read properties of undefined (reading 'value')",
    file: 'src/app/services/cache.service.ts',
    line: 16,
    fixSuggestion: 'return entry?.value ?? ""',
    triggerLabel: 'Bug 9: get(missing)',
  },
  {
    id: 'bug-10',
    title: 'Bug 10: includes on null',
    description: 'ValidationService.isValidEmail — .includes when email is null.',
    errorMessage: "TypeError: Cannot read properties of null (reading 'includes')",
    file: 'src/app/services/validation.service.ts',
    line: 9,
    fixSuggestion: 'return email?.includes("@") ?? false',
    triggerLabel: 'Bug 10: isValidEmail(null)',
  },
];
